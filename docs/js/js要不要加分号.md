---
title: js要不要加分号
---

这个问题曾经让很多程序员吵得不可开交（程序员真是一群特别喜欢撕逼的人，这么点小问题都能分成两派撕起来 😂）

<!-- more -->

首先说一下那些情况下必须加分号：行首是： `[` `(` `+` `-` / 之一的情况下，上一行结尾必须加分号。
实际情况中用`/`、`+`、`-`作为行首非常少见，我目前没有见到过这种情况。
一行开头是`(`或者`[`的代码倒是有。比如下面的代码：

```javascript
a = b
(function(){
...
})()
```

```javascript
a = b[(1, 2, 3)].forEach(function (e) {
    console.log(e);
});
```

上面的代码不加分号是会报错的。报错其实还好，就怕那种还能语句还能运行，那这种 bug 就很隐蔽了，调试起来会很头痛。所以遇到以`(` `[`开头的情况，在前面加`;`就可以了。

```javascript
a = b
;(function(){
...
})()
```

```javascript
a = b;
[1, 2, 3].forEach(function (e) {
    console.log(e);
});
```

如果你看着`;`不爽，加`void`也可以，让这行不是( [开头就可以了。

到这里我们发现，需要加的情况真的很少，所以加与不加纯属个人书写风格的问题。并无好坏区别。我最早是加分号的，因为我的领导是做 java 出身，不加分号令他很没有安全感，他提过这个问题所以为了照顾大家的代码习惯，我是一律末尾加分好的。后来看了很多 js 规范里面都是推荐不加分号的，为了更靠近主流风格也为了每行少敲一次键盘 😅，就同一不加了。
另外，这个问题还可以通过工具解决，比如`eslint`,`prettier`都可以帮助你添加或者删除分号了。只需要稍微做一下配置就可以让你的代码匹配团队要求的风格了。
